---
import { getCollection, render } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import NavBar from '../../components/utils/NavBar/NavBar.astro';

export async function getStaticPaths() {
	const posts = await getCollection('news');
	return posts.map((post) => ({
		params: { id: post.id },
		props: { post },
	}));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<Layout>
	<NavBar />
	<article class="container mx-auto px-4 pt-32 pb-12 max-w-4xl">
		<header class="mb-8 border-b border-[#3776AB]/10 pb-8">
			<h1 class="text-3xl md:text-4xl font-bold mb-4 text-[#3776AB]">{post.data.title}</h1>
			<time datetime={post.data.publishedAt.toISOString()} class="text-[#3776AB]/60">
				{post.data.publishedAt.toLocaleDateString('en-US', {
					year: 'numeric',
					month: 'long',
					day: 'numeric',
				})}
			</time>
		</header>
		<div class="prose prose-lg max-w-none prose-a:text-[#3776AB] hover:prose-a:text-[#3776AB]/80">
			<Content />
		</div>
	</article>
</Layout>